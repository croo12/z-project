# 기능 명세서: 디버그 모드 UI 개선
**브랜치**: `008-debug-ui` | **날짜**: 2026-01-11 | **상태**: 초안

## 사용자 스토리
### 사용자 스토리 1 - 디버그 오버레이 확인 (우선순위: P1)
개발자로서, 나는 앱이 디버그 모드로 빌드되었을 때 화면에 현재 상태를 보여주는 오버레이 UI를 보고 싶다.

**수용 기준**:
- 디버그 빌드(`dev` 모드)에서만 오버레이가 표시되어야 한다.
- 오버레이는 화면 최상단에 항상 떠 있어야 한다.
- 오버레이는 최소화/확장 가능해야 한다.

### 사용자 스토리 2 - 서버 연결 상태 확인 (우선순위: P1)
개발자로서, 나는 현재 앱이 AI Brain Server와 연결되어 있는지 시각적으로 확인하고 싶다.

**수용 기준**:
- 오버레이에 `BRAIN_SERVER_URL` 값이 표시되어야 한다.
- 주기적으로(예: 10초마다) 서버 헬스체크를 수행하여 연결 상태(초록/빨강)를 표시해야 한다.
- 헬스체크 실패 시 에러 메시지를 간략히 보여줘야 한다.

### 사용자 스토리 3 - AI 동작 테스트 (우선순위: P2)
개발자로서, 나는 앱 내부의 AI 기능(추천, 페르소나 업데이트)이 정상 동작하는지 테스트하고 싶다.

**수용 기준**:
- 오버레이에 "Test AI" 버튼이 있어야 한다.
- 버튼 클릭 시 임의의 텍스트로 AI 분석 요청을 보내고 결과를 팝업으로 보여준다.
- `GEMINI_API_KEY` 설정 여부를 표시해야 한다.

## 기능적 요구사항
- **FR-001**: React 컴포넌트로 `DebugOverlay`를 구현해야 한다.
- **FR-002**: `import.meta.env.DEV` 또는 `Tauri`의 디버그 플래그를 사용하여 프로덕션 빌드에서는 렌더링되지 않도록 해야 한다.
- **FR-003**: 서버 연결 상태 확인을 위해 `check_server_health` Tauri 커맨드를 주기적으로 호출해야 한다.
- **FR-004**: AI 테스트를 위해 `test_ai_connection` (신규) Tauri 커맨드를 추가해야 한다.

## 비기능적 요구사항
- **NFR-001**: 오버레이는 앱의 주요 기능을 가리지 않도록 위치 이동이 가능하거나 반투명해야 한다.
- **NFR-002**: 헬스체크 로직은 메인 스레드를 차단하지 않아야 한다.

## 제약 조건
- 기존 UI 디자인 시스템(TailwindCSS)을 활용한다.
- 모바일 화면 크기를 고려하여 컴팩트하게 디자인한다.
